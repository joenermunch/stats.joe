(this.webpackJsonpnewstats=this.webpackJsonpnewstats||[]).push([[0],{21:function(e,t,a){e.exports=a(48)},44:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),c=a.n(l),s=a(2),u=a.n(s),o=a(3),m=a(14),i=a(15),d=a(19),p=a(16),g=a(20),f=a(17),b=a.n(f),E=(a(44),a(18)),v=a.n(E),h=(a(45),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={username:null,images:null,stats:null,loading:!1,download:!1},a.callAPI=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),e.next=4,b.a.post("/api/data",{username:a.state.username});case 4:n=e.sent,r=n.data.topalbums.album.map((function(e){return e.image[2]["#text"]})),l=n.data.topalbums.album.map((function(e){return{artist:e.artist.name,album:e.name,playcount:e.playcount,image:e.image[2]["#text"]}})),a.setState({images:r,stats:l,loading:!1,download:!0});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.makeImage=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(document.querySelector("#capture"),{allowTaint:!0,useCORS:!0}).then((function(e){var t=document.createElement("a");t.href=e.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),t.download="mytopalbums.jpg",t.click()}));case 2:case"end":return e.stop()}}),e)}))),a.renderDownload=function(){return!0===a.state.download?r.a.createElement("button",{onClick:a.makeImage},"Download"):r.a.createElement(r.a.Fragment,null)},a.renderImages=function(){return a.state.stats?a.state.stats.map((function(e){return r.a.createElement("div",{style:{background:"url(".concat(e.image,")")},key:e.image,className:"image-item"},r.a.createElement("div",{className:"stats"},r.a.createElement("p",null,e.artist),r.a.createElement("p",{className:"album"},e.album),r.a.createElement("p",{className:"plays"},e.playcount," plays")))})):r.a.createElement(r.a.Fragment,null)},a.renderLoading=function(){return!0===a.state.loading?r.a.createElement("div",{className:"loading"},r.a.createElement("p",null,"Loading...")):r.a.createElement(r.a.Fragment,null)},a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main-container"},r.a.createElement("form",{onSubmit:function(t){return e.callAPI(t)}},r.a.createElement("input",{type:"text",onChange:function(t){return e.setState({username:t.target.value})}}),r.a.createElement("button",{className:"submit-button",onClick:this.callAPI},"Get Images"),this.renderLoading()),r.a.createElement("div",{className:"image-container"},r.a.createElement("div",{className:"image-box",id:"capture"},this.renderImages())),r.a.createElement("div",{className:"result"},this.renderDownload()))}}]),t}(n.Component));c.a.render(r.a.createElement(h,null),document.querySelector("#root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.9ab8ac9f.chunk.js.map